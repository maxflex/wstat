{"version":3,"sources":["app.coffee","routes.coffee","controllers/lists.coffee","controllers/login.coffee","controllers/main.coffee","controllers/_template.coffee","directives/bs-select.coffee","directives/comments.coffee","directives/counter.coffee","directives/email.coffee","directives/input-comment.coffee","directives/multi-select.coffee","directives/order-by.coffee","directives/pencil-input.coffee","directives/phones.coffee","directives/plural.coffee","directives/plus.coffee","directives/select-new.coffee","directives/select.coffee","directives/sms.coffee","directives/tutor-photo.coffee","directives/user-switch.coffee","directives/user.coffee","resources/resources.coffee","factory/factory.coffee","service/ace.coffee","service/crud.coffee","service/export.coffee","service/sort.coffee","service/transform.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["angular.module(\"Wstat\", ['ngRoute', 'ngSanitize', 'ngResource', 'ngAnimate', 'ui.sortable', 'ui.bootstrap', 'angular-ladda', 'angularFileUpload'])\r\n    .constant('DEFAULT_LIST_TITLE', 'Новый список')\r\n    .run ($rootScope, List, DEFAULT_LIST_TITLE, ExportService, SmartSort) ->\r\n        $rootScope.ExportService = ExportService\r\n        $rootScope.SmartSort = SmartSort\r\n        ExportService.init()\r\n        # список слов\r\n        $rootScope.list = new List\r\n            title: null\r\n            phrases: []\r\n        $rootScope.list = List.get({id: DEBUG_LIST_ID}) if ENV is 'local' and DEBUG_LIST_ID\r\n\r\n        $rootScope.loading = false\r\n\r\n        $rootScope.$watch 'loading', (newVal, oldVal) ->\r\n            ajaxStart() if newVal is true\r\n            ajaxEnd() if newVal is false\r\n\r\n        $rootScope.formatDateTime = (date) ->\r\n            moment(date).format \"DD.MM.YY в HH:mm\"\r\n\r\n        $rootScope.$on '$routeChangeStart', (event, next, prev) ->\r\n            $rootScope.route = next.$$route\r\n            $rootScope.route.title = $rootScope.list.title or DEFAULT_LIST_TITLE if $rootScope.route.originalPath is '/'\r\n            ExportService.init({list: $rootScope.list})\r\n","angular.module('Wstat')\r\n    .config (['$routeProvider', ($routeProvider) ->\r\n        $routeProvider.when '/',\r\n            controller : 'MainCtrl'\r\n            title: '–'\r\n            templateUrl: 'pages/main'\r\n        .when '/lists',\r\n            templateUrl: 'pages/lists'\r\n            title: 'Списки'\r\n            controller : 'ListsCtrl'\r\n    ])\r\n","angular\r\n    .module 'Wstat'\r\n    .controller 'ListsCtrl', ($scope, $rootScope, $location, $timeout, List) ->\r\n        if $scope.lists is undefined\r\n            $rootScope.loading = true\r\n            $scope.lists = List.query -> $rootScope.loading = false\r\n\r\n        $scope.remove = (list) ->\r\n            $scope.lists = removeById($scope.lists, list.id)\r\n            List.delete({id: list.id})\r\n\r\n        $scope.open = (list) ->\r\n            $rootScope.loading = true\r\n            $rootScope.list = List.get {id: list.id}, ->\r\n                $rootScope.loading = false\r\n                $location.path('/')\r\n","angular\r\n    .module 'Wstat'\r\n    .controller 'LoginCtrl', ($scope, $http) ->\r\n        angular.element(document).ready ->\r\n            $scope.l = Ladda.create(document.querySelector('#login-submit'))\r\n\r\n        $scope.checkFields = ->\r\n            $scope.l.start()\r\n            ajaxStart()\r\n            $scope.in_process = true\r\n            $http.post 'login',\r\n                login: $scope.login\r\n                password: $scope.password\r\n            .then (response) ->\r\n                if response.data is true\r\n                    location.reload()\r\n                else\r\n                    $scope.in_process = false\r\n                    ajaxEnd()\r\n                    $scope.l.stop()\r\n                    notifyError \"Неправильная пара логин-пароль\"\r\n","angular\r\n    .module 'Wstat'\r\n    .controller 'MainCtrl', ($scope, $rootScope, $http, TransformService) ->\r\n        bindArguments($scope, arguments)\r\n\r\n        # tab listener on textarea\r\n        $scope.$on '$viewContentLoaded', ->\r\n            $(\"#modal-value\").off('keydown').keydown (e) ->\r\n                if e.keyCode is 9\r\n                    start = this.selectionStart\r\n                    end = this.selectionEnd\r\n                    $this = $(this)\r\n                    value = $this.val()\r\n                    $this.val(value.substring(0, start) + \"\\t\" + value.substring(end))\r\n                    this.selectionStart = this.selectionEnd = start + 1\r\n                    e.preventDefault()\r\n\r\n        $scope.replace = ->\r\n            $rootScope.list.phrases.forEach (phrase) ->\r\n                phrase.phrase = replaceWord(phrase.phrase, $scope.find_phrase, $scope.replace_phrase)\r\n            $scope.find_phrase = undefined\r\n            $scope.replace_phrase = undefined\r\n            closeModal('replace')\r\n\r\n        $scope.editPhrase = ->\r\n            [$scope.editing_phrase.phrase, $scope.editing_phrase.minus] = separateMinuses($scope.editing_phrase.phrase, convertToMinus($scope.editing_phrase.minus))\r\n            phrase_index = _.findIndex $scope.list.phrases, $scope.original_phrase\r\n            _.extend $scope.list.phrases[phrase_index] = $scope.editing_phrase\r\n            closeModal 'edit-phrase'\r\n\r\n        $scope.startEditing = (phrase) ->\r\n            $scope.original_phrase = _.clone phrase\r\n            $scope.editing_phrase  = _.clone phrase\r\n            showModal 'edit-phrase'\r\n            rebindMasks()\r\n\r\n        $scope.addWords = ->\r\n            new_phrases = parsePhrases()\r\n            $rootScope.list.phrases = $rootScope.list.phrases.concat(new_phrases)\r\n            closeModal()\r\n\r\n        parsePhrases = ->\r\n            new_phrases = []\r\n            if $scope.modal.value then $scope.modal.value.split('\\n').forEach (line) ->\r\n                # skip empty lines\r\n                if line.trim().length\r\n                    list = line.split('\\t').map (str) -> return str.trim()\r\n                    [phrase, minus] = separateMinuses(list[0])\r\n                    if phrase\r\n                        list_item = {phrase: phrase, minus: minus, original: list[0]}\r\n                        # if has tabs\r\n                        if list.length > 1\r\n                            frequency = list[1]\r\n                            # if double tab or not number after tab\r\n                            if $.isNumeric(frequency)\r\n                                list_item.frequency = parseInt(frequency)\r\n                            list_item.original = list[2].trim() if list[2]\r\n                        new_phrases.push(list_item)\r\n            new_phrases\r\n\r\n        # удалить слова внутри фразы\r\n        $scope.deleteWordsInsidePhrase = ->\r\n            $scope.modal.value.split('\\n').forEach (textarea_phrase) ->\r\n                $rootScope.list.phrases.forEach (phrase) ->\r\n                    if phrase.phrase.match exactMatch(textarea_phrase)\r\n                        phrase.phrase = removeDoubleSpaces(phrase.phrase.replace(exactMatch(textarea_phrase), ' ')).trim()\r\n            $scope.removeEmptyWords()\r\n            closeModal()\r\n\r\n        # удалить слова, содержащие фразы\r\n        $scope.deletePhrasesWithWords = ->\r\n            $scope.modal.value.split('\\n').forEach (textarea_phrase) ->\r\n                $rootScope.list.phrases = _.filter $rootScope.list.phrases, (phrase) ->\r\n                    not phrase.phrase.match exactMatch(textarea_phrase)\r\n            closeModal()\r\n\r\n        # разбить фразы на слова\r\n        $scope.splitPhrasesToWords = (phrases = null) ->\r\n            new_phrases = []\r\n            (phrases or $rootScope.list.phrases).forEach (list_item) ->\r\n                list_item.phrase.split(' ').forEach (word) ->\r\n                    word = word.trim()\r\n                    if word.length\r\n                        item = _.extend _.clone(list_item), {phrase: word}\r\n                        delete item.id\r\n                        new_phrases.push item\r\n            if phrases\r\n                return new_phrases\r\n            else\r\n                $rootScope.list.phrases = new_phrases\r\n\r\n        # удалить дубликаты\r\n        $scope.uniq = (phrases = null) ->\r\n            new_phrases = _.uniq((phrases or $rootScope.list.phrases), 'phrase')\r\n            if phrases\r\n                return new_phrases\r\n            else\r\n                $rootScope.list.phrases = new_phrases\r\n\r\n        $scope.lowercase = ->\r\n            $rootScope.list.phrases.forEach (list_item) ->\r\n                list_item.phrase = list_item.phrase.toLowerCase()\r\n\r\n        $scope.removeFrequencies = ->\r\n            $rootScope.list.phrases.forEach (list_item) ->\r\n                list_item.frequency = undefined\r\n\r\n        $scope.removeMinuses = ->\r\n            $rootScope.list.phrases.forEach (phrase) -> phrase.minus = ''\r\n\r\n        $scope.removeStartingWith = (sign, phrases = null) ->\r\n            (phrases or $rootScope.list.phrases).forEach (list_item, index) ->\r\n                words = []\r\n                list_item.phrase.split(' ').forEach (word) -> words.push(word) if word.length and word[0] != sign\r\n                list_item.phrase = words.join(' ').trim()\r\n            $scope.removeEmptyWords(phrases)\r\n\r\n        # удалить пустые слова из списка\r\n        $scope.removeEmptyWords = (phrases = null)->\r\n            new_phrases = _.filter (phrases or $rootScope.list.phrases), (phrase) ->\r\n                phrase.phrase.trim() isnt ''\r\n            if phrases\r\n                return new_phrases\r\n            else\r\n                $rootScope.list.phrases = new_phrases\r\n\r\n        $scope.removePhrase = (phrase) ->\r\n            $rootScope.list.phrases = _.without $rootScope.list.phrases, phrase\r\n\r\n        # конфигурация минус-слов\r\n        $scope.configureMinus = ->\r\n            $scope.removeMinuses()\r\n            $rootScope.list.phrases.forEach (phrase) ->\r\n                words_list = phrase.phrase.split(' ')\r\n                $rootScope.list.phrases.forEach (phrase2) ->\r\n                    # самого себя не проверяем\r\n                    if phrase.phrase isnt phrase2.phrase\r\n                        words_list2 = phrase2.phrase.split(' ')\r\n                        flag = true\r\n                        words_list.forEach (word) ->\r\n                            if word in words_list2\r\n                                words_list2[words_list2.indexOf(word)] = null\r\n                            else\r\n                                flag = false\r\n                        if flag and words_list2.length is (words_list.length + 1)\r\n                            phrase.minuses = [] if not phrase.hasOwnProperty('minuses')\r\n                            words_list2.forEach (word) ->\r\n                                phrase.minuses.push(\"-#{word}\") if word\r\n            $rootScope.list.phrases.forEach (phrase) ->\r\n                if phrase.hasOwnProperty('minuses') and phrase.minuses.length\r\n                    minus_list = phrase.minus.split(' ')\r\n                    minus_list = minus_list.concat(phrase.minuses)\r\n                    phrase.minus = minus_list.join(' ').trim()\r\n                    phrase.minuses = []\r\n\r\n        $scope.clear = ->\r\n            $rootScope.list.phrases = []\r\n\r\n        $scope.saveAs = ->\r\n            $rootScope.loading = true\r\n            $rootScope.route.title = $rootScope.list.title\r\n            if $rootScope.list.id\r\n                $rootScope.list.$update().then -> $rootScope.loading = false\r\n            else\r\n                $rootScope.list.$save().then -> $rootScope.loading = false\r\n            closeModal('save-as')\r\n\r\n        $scope.save = ->\r\n            $rootScope.loading = true\r\n            $rootScope.list.$update().then -> $rootScope.loading = false\r\n\r\n        # проставить частоты\r\n        $scope.getFrequencies = ->\r\n            $scope.frequencies = []\r\n            getFrequencies()\r\n\r\n        getFrequencies = (step = 0) ->\r\n            phrases = $rootScope.list.phrases.slice(step * 100, (step * 100) + 100)\r\n\r\n            # для подсчета кол-ва процентов\r\n            length = $rootScope.list.phrases.length / 10 * 10 + 100\r\n            $rootScope.center_title = Math.round(step / length * 10000) + '%'\r\n\r\n            $http.post 'api/getFrequencies',\r\n                phrases: _.pluck(phrases, 'phrase')\r\n            .then (response) ->\r\n                $scope.frequencies = $scope.frequencies.concat(response.data)\r\n                if phrases.length is 100\r\n                    # console.log(\"(#{step} / #{length} * 10000)\")\r\n                    getFrequencies(step + 1)\r\n                else\r\n                    # завершено\r\n                    $rootScope.list.phrases.forEach (phrase, index) ->\r\n                        phrase.frequency = $scope.frequencies[index]\r\n                    $rootScope.center_title = undefined\r\n            , (response) ->\r\n                notifyError(response.data)\r\n\r\n        $scope.transform = ->\r\n            TransformService.phrases = angular.copy($rootScope.list.phrases)\r\n            TransformService.phrases = $scope.splitPhrasesToWords(TransformService.phrases)\r\n            TransformService.phrases = $scope.uniq(TransformService.phrases)\r\n            TransformService.phrases = _.sortBy(TransformService.phrases, 'phrase')\r\n            showModal('transform')\r\n\r\n        angular.element(document).ready ->\r\n            console.log $scope.title\r\n\r\n        $scope.onEnter = (func, event) ->\r\n            func() if event.keyCode is 13\r\n\r\n        $scope.runModal = (action, title, placeholder = 'список слов или фраз', value = null) ->\r\n            $scope.modal = value: value, action: action, title: title, placeholder: placeholder\r\n            showModal 'main'\r\n\r\n        $scope.filterItems = (value) ->\r\n            value.phrase.match $scope.phrase_search\r\n\r\n        separateMinuses = (phrase, existing_minuses = '') ->\r\n            minus = []\r\n            words = []\r\n            phrase.split(' ').forEach (value) ->\r\n                if value[0] is '-' and value.length\r\n                    minus.push(value)\r\n                else\r\n                    words.push(value)\r\n\r\n            existing_minuses += ' ' if minus.length\r\n            existing_minuses += minus.join ' '\r\n            [words.join(' '), existing_minuses]\r\n\r\n        convertToMinus = (phrase) ->\r\n            minus = []\r\n            phrase.split(' ').forEach (value) ->\r\n                if value[0] is '-' and value.length\r\n                    minus.push value\r\n                else\r\n                    minus.push '-' + value\r\n\r\n            minus.join ' '\r\n\r\n        $scope.getHardIndex = (phrase) ->\r\n            1 + _.findIndex $scope.list.phrases, phrase\r\n","# angular\r\n#     .module 'Egecms'\r\n#     .controller 'VariablesIndex', ($scope, $attrs, IndexService, Variable) ->\r\n#         bindArguments($scope, arguments)\r\n#         angular.element(document).ready ->\r\n#             IndexService.init(Variable, $scope.current_page, $attrs)\r\n#     .controller 'VariablesForm', ($scope, $attrs, $timeout, FormService, Variable) ->\r\n#         bindArguments($scope, arguments)\r\n#         angular.element(document).ready ->\r\n#             FormService.init(Variable, $scope.id, $scope.model)\r\n","# @todo – разобраться как\r\n# angular.module('Egecms').directive 'bsSelect', ($timeout) ->\r\n#     restrict: 'A'\r\n#     require: 'ngModel'\r\n#     compile: (scope, element, attrs) ->\r\n#         $(element).selectpicker()\r\n","# angular.module('Egerep').directive 'comments', ->\r\n#     restrict: 'E'\r\n#     templateUrl: 'directives/comments'\r\n#     scope:\r\n#         user: '='\r\n#         entityId: '='\r\n#         trackLoading: '='\r\n#         entityType: '@'\r\n#     controller: ($rootScope, $scope, $timeout, Comment) ->\r\n#         $scope.show_max = 4                 # сколько комментов показывать в свернутом режиме\r\n#         $scope.show_all_comments = false    # показать все комментарии?\r\n#         $scope.is_dragging = false          # комментарий перетаскивается\r\n#\r\n#         bindDraggable = (comment_id) ->\r\n#             $(\"#comment-#{comment_id}\").draggable\r\n#                 revert: 'invalid'\r\n#                 activeClass: 'drag-active'\r\n#                 start: (e, ui) ->\r\n#                     $scope.is_dragging = true\r\n#                     $scope.$apply()\r\n#                 stop: (e, ui) ->\r\n#                     $scope.is_dragging = false\r\n#                     $scope.$apply()\r\n#\r\n#         $timeout ->\r\n#             $scope.comments.forEach (comment) ->\r\n#                 bindDraggable(comment.id)\r\n#             $(\"#comment-delete-#{$scope.entityType}-#{$scope.entityId}\").droppable\r\n#                 tolerance: 'pointer'\r\n#                 hoverClass: 'hovered'\r\n#                 drop: (e, ui) ->\r\n#                     $scope.remove($(ui.draggable).data('comment-id'))\r\n#         , 2000\r\n#\r\n#         $scope.showAllComments = ->\r\n#             $scope.show_all_comments = true\r\n#             $timeout ->\r\n#                 $scope.comments.forEach (comment) ->\r\n#                     bindDraggable(comment.id)\r\n#\r\n#         $scope.getComments = ->\r\n#             if ($scope.show_all_comments or $scope.comments.length <= $scope.show_max) then $scope.comments else _.last($scope.comments, $scope.show_max - 1)\r\n#\r\n#         # перезагружаем комменты, если меняется entity_id\r\n#         $scope.$watch 'entityId', (newVal, oldVal) ->\r\n#             $scope.comments = Comment.query\r\n#                 entity_type: $scope.entityType\r\n#                 entity_id: newVal\r\n#             , ->\r\n#                 $rootScope.loaded_comments++ if $scope.trackLoading\r\n#\r\n#         $scope.formatDateTime = (date) ->\r\n#             moment(date).format \"DD.MM.YY в HH:mm\"\r\n#\r\n#         $scope.startCommenting = (event) ->\r\n#             $scope.start_commenting = true\r\n#             $timeout ->\r\n#                 $(event.target).parent().find('input').focus()\r\n#\r\n#         $scope.endCommenting = ->\r\n#             $scope.comment = ''\r\n#             $scope.start_commenting = false\r\n#\r\n#         $scope.remove = (comment_id) ->\r\n#             _.find($scope.comments, {id: comment_id}).$remove()\r\n#             $scope.comments = _.without($scope.comments, _.findWhere($scope.comments, {id: comment_id}))\r\n#\r\n#         $scope.edit = (comment, event) ->\r\n#             old_text    = comment.comment\r\n#             element     = $(event.target)\r\n#\r\n#             element.unbind('keydown').unbind('blur')\r\n#\r\n#             element.attr('contenteditable', 'true').focus()\r\n#                 .on 'keydown', (e) ->\r\n#                     console.log old_text\r\n#                     if e.keyCode is 13\r\n#                         $(@).removeAttr('contenteditable').blur()\r\n#                         comment.comment = $(@).text()\r\n#                         comment.$update()\r\n#                     if e.keyCode is 27\r\n#                         $(@).blur()\r\n#\r\n#                 .on 'blur', (e) ->\r\n#                     if element.attr 'contenteditable'\r\n#                         console.log old_text\r\n#                         element.removeAttr('contenteditable').html old_text\r\n#             return\r\n#             # setEndOfContenteditable(event.target)\r\n#\r\n#         $scope.submitComment = (event) ->\r\n#             if event.keyCode is 13\r\n#                 new_comment = new Comment\r\n#                     comment: $scope.comment\r\n#                     user_id: $scope.user.id\r\n#                     entity_id: $scope.entityId\r\n#                     entity_type: $scope.entityType\r\n#                 new_comment.$save()\r\n#                     .then (response)->\r\n#                         console.log response\r\n#                         new_comment.user = $scope.user\r\n#                         new_comment.id = response.id\r\n#                         $scope.comments.push new_comment\r\n#                         $timeout ->\r\n#                             bindDraggable(new_comment.id)\r\n#                 $scope.endCommenting()\r\n#\r\n#             if event.keyCode is 27\r\n#                 $(event.target).blur()\r\n","angular.module('Wstat').directive 'ngCounter', ($timeout) ->\r\n    restrict: 'A'\r\n    link: ($scope, $element, $attrs) ->\r\n        $($element).parent().append \"<span class='input-counter'></span>\"\r\n        counter = $($element).parent().find('.input-counter')\r\n\r\n        $($element).on 'keyup', -> counter.text $(@).val().length or ''\r\n\r\n        $timeout ->\r\n            $($element).keyup()\r\n        , 500\r\n","# angular.module('Egerep').directive 'email', ->\r\n#     restrict: 'E'\r\n#     templateUrl: 'directives/email'\r\n#     scope:\r\n#         entity: '='\r\n#     controller: ($scope) ->\r\n#         $scope.send = ->\r\n#             $('#email-modal').modal 'show'\r\n#     # controller: ($scope, $timeout, Email) ->\r\n#     #     # массовая отправка?\r\n#     #     $scope.mass = false\r\n#     #\r\n#     #     # подсчитать СМС\r\n#     #     $scope.smsCount = ->\r\n#     #         SmsCounter.count($scope.message || '').messages\r\n#     #\r\n#     #     # отправить\r\n#     #     $scope.send = ->\r\n#     #         if $scope.message\r\n#     #             sms = new Sms\r\n#     #                 message: $scope.message\r\n#     #                 to: $scope.number\r\n#     #                 mass: $scope.mass\r\n#     #             sms.$save()\r\n#     #\r\n#     #     # подгружаем историю, если номер телефона меняется\r\n#     #     $scope.$watch 'number', (newVal, oldVal) ->\r\n#     #         console.log $scope.$parent.formatDateTime($scope.created_at)\r\n#     #         $scope.history = Sms.query({number: newVal}) if newVal\r\n","# angular.module('Egerep').directive 'inputComment', ->\r\n#     restrict: 'E'\r\n#     templateUrl: 'directives/input-comment'\r\n#     scope:\r\n#         entity: '='\r\n#         commentField: '@'\r\n#     controller: ($scope, $timeout) ->\r\n#         $scope.is_being_commented = false\r\n#\r\n#         $scope.blurComment = ->\r\n#             $scope.is_being_commented = false\r\n#\r\n#         $scope.focusComment = ->\r\n#             $scope.is_being_commented = true\r\n#\r\n#         $scope.startComment = (event) ->\r\n#             $scope.is_being_commented = true\r\n#             $timeout ->\r\n#                 $(event.target).parent().children('input').focus()\r\n#\r\n#         $scope.endComment =  (event) ->\r\n#             if event.keyCode is 13\r\n#                 $(event.target).blur()\r\n#                 return\r\n","angular.module 'Wstat'\r\n    .directive 'ngMulti', ->\r\n        restrict: 'E'\r\n        replace: true\r\n        scope:\r\n            object: '='\r\n            model: '='\r\n            label: '@'\r\n            noneText: '@'\r\n        templateUrl: 'directives/ngmulti'\r\n        controller: ($scope, $element, $attrs, $timeout) ->\r\n            $timeout ->\r\n                $($element).selectpicker\r\n                    noneSelectedText: $scope.noneText\r\n            , 100\r\n","angular.module 'Wstat'\r\n    .directive 'orderBy', ->\r\n        restrict: 'E'\r\n        replace: true\r\n        scope:\r\n            options: '='\r\n        templateUrl: 'directives/order-by'\r\n        link: ($scope, $element, $attrs) ->\r\n            IndexService = $scope.$parent.IndexService\r\n            local_storage_key = 'sort-' + IndexService.controller\r\n\r\n            syncIndexService = (sort) ->\r\n                IndexService.sort = sort\r\n                IndexService.current_page = 1\r\n                IndexService.loadPage()\r\n\r\n            $scope.setSort = (sort) ->\r\n                $scope.sort = sort\r\n                localStorage.setItem(local_storage_key, sort)\r\n                syncIndexService(sort)\r\n\r\n            $scope.sort = localStorage.getItem(local_storage_key)\r\n\r\n            if $scope.sort is null\r\n                $scope.setSort(0)\r\n            else\r\n                syncIndexService($scope.sort)\r\n","# angular.module('Egerep').directive 'pencilInput', ->\r\n#     restrict: 'E'\r\n#     replace: true\r\n#     templateUrl: 'directives/pencil-input'\r\n#     scope:\r\n#         model: '='\r\n#     controller: ($scope, $timeout, $element, $controller) ->\r\n#         $scope.is_being_commented = false\r\n#\r\n#         $scope.blurComment = ->\r\n#             $scope.is_being_commented = false\r\n#\r\n#         $scope.focusComment = ->\r\n#             $scope.is_being_commented = true\r\n#\r\n#         $scope.startComment = (event) ->\r\n#             $scope.is_being_commented = true\r\n#             $timeout ->\r\n#                 $(event.target).parent().children('div').focus()\r\n#\r\n#         $scope.watchEnter = (event) ->\r\n#             if event.keyCode in [13, 27]\r\n#                 # @todo: надо изменить\r\n#                 if event.keyCode is 13\r\n#                     $scope.model = $(event.target).parent().children('div').text()\r\n#\r\n#                 $(event.target).parent().children('div').text($scope.model)\r\n#                 event.preventDefault()\r\n#                 $(event.target).blur()\r\n#             return\r\n","# angular.module('Egerep').directive 'phones', ->\r\n#     restrict: 'E'\r\n#     templateUrl: 'directives/phones'\r\n#     scope:\r\n#         entity: '='\r\n#     controller: ($scope, $timeout, $rootScope, PhoneService, UserService) ->\r\n#         $scope.PhoneService = PhoneService\r\n#         $scope.UserService  = UserService\r\n#\r\n#         console.log $scope.entityType\r\n#\r\n#         # level depth\r\n#         $rootScope.dataLoaded.promise.then (data) ->\r\n#             $scope.level = if $scope.entity.phones and $scope.entity.phones.length then $scope.entity.phones.length else 1\r\n#\r\n#         $scope.nextLevel = ->\r\n#             $scope.level++\r\n#\r\n#         $scope.phoneMaskControl = (event) ->\r\n#             el = $(event.target)\r\n#             # grabs string phone_2 from object model.phone2\r\n#             # so it can be accessible by key\r\n#             phone_id = el.attr('ng-model').split('.')[1]\r\n#             $scope.entity[phone_id] = $(event.target).val()\r\n#\r\n#         $scope.isFull = (number) ->\r\n#             return false if number is undefined or number is \"\"\r\n#             !number.match(/_/)\r\n#\r\n#         # отправить смс\r\n#         $scope.sms = (number) ->\r\n#             $('#sms-modal').modal 'show'\r\n#             $rootScope.sms_number = number\r\n#\r\n#         # информация по api\r\n#         $scope.info = (number) ->\r\n#             $scope.api_number = number\r\n#             $scope.mango_info = null\r\n#             $('#api-phone-info').modal 'show'\r\n#             PhoneService.info(number).then (response) ->\r\n#                 console.log response.data\r\n#                 $scope.mango_info = response.data\r\n#\r\n#         $scope.formatDateTime = (date) ->\r\n#             moment(date).format \"DD.MM.YY в HH:mm\"\r\n#\r\n#         $scope.time = (seconds) ->\r\n#             moment({}).seconds(seconds).format(\"mm:ss\")\r\n#\r\n#         $scope.getNumberTitle = (number) ->\r\n#             console.log number, $scope.api_number\r\n#             return 'текущий номер' if number is PhoneService.clean($scope.api_number)\r\n#             number\r\n#\r\n#         recodringLink = (recording_id) ->\r\n#             api_key   = 'goea67jyo7i63nf4xdtjn59npnfcee5l'\r\n#             api_salt  = 't9mp7vdltmhn0nhnq0x4vwha9ncdr8pa'\r\n#             timestamp = moment().add(5, 'minute').unix()\r\n#\r\n#             sha256 = new jsSHA('SHA-256', 'TEXT')\r\n#             sha256.update(api_key + timestamp + recording_id + api_salt)\r\n#             sign = sha256.getHash('HEX')\r\n#\r\n#             return \"https://app.mango-office.ru/vpbx/queries/recording/link/#{recording_id}/play/#{api_key}/#{timestamp}/#{sign}\"\r\n#\r\n#         $scope.play = (recording_id) ->\r\n#             $scope.audio.pause() if $scope.audio\r\n#             $scope.audio = new Audio recodringLink(recording_id)\r\n#             $scope.audio.play()\r\n#             $scope.is_playing = recording_id\r\n#\r\n#         $scope.isPlaying = (recording_id) ->\r\n#             $scope.is_playing is recording_id\r\n#\r\n#         $scope.stop = (recording_id) ->\r\n#             $scope.is_playing = null\r\n#             $scope.audio.pause()\r\n#\r\n#         $scope.disconnectReason = (data) ->\r\n#             # return 'НБТ' if data.to_extension is '' and data.disconnect_reason is '1100'\r\n#             data.disconnect_reason\r\n","angular.module 'Wstat'\r\n    .directive 'plural', ->\r\n        restrict: 'E'\r\n        scope:\r\n            count: '='      # кол-во\r\n            type: '@'       # тип plural age | student | ...\r\n            noneText: '@'   # текст, если кол-во равно нулю\r\n        templateUrl: 'directives/plural'\r\n        controller: ($scope, $element, $attrs, $timeout) ->\r\n            $scope.textOnly = $attrs.hasOwnProperty('textOnly')\r\n            $scope.hideZero = $attrs.hasOwnProperty('hideZero')\r\n\r\n            $scope.when =\r\n                'minute': ['минуту', 'минуты', 'минут']\r\n                'hour': ['час', 'часа', 'часов']\r\n                'day': ['день', 'дня', 'дней']\r\n                'phrase': ['фраза', 'фразы', 'фраз']\r\n                'minus': ['минус слово', 'минус слова', 'минус слов']\r\n","# angular.module 'Egerep'\r\n#     .directive 'plus', ->\r\n#         restrict: 'E'\r\n#         scope:\r\n#             previous: '='\r\n#             count: '='\r\n#         templateUrl: 'directives/plus'\r\n","angular.module 'Wstat'\r\n    .directive 'ngSelectNew', ->\r\n        restrict: 'E'\r\n        replace: true\r\n        scope:\r\n            object: '='\r\n            model: '='\r\n            noneText: '@'\r\n            label: '@'\r\n            field: '@'\r\n        templateUrl: 'directives/select-new'\r\n        controller: ($scope, $element, $attrs, $timeout) ->\r\n            # выбираем первое значение по умолчанию, если нет noneText\r\n            if not $scope.noneText\r\n                value = _.first Object.keys($scope.object)\r\n                value = $scope.object[value][$scope.field] if $scope.field\r\n\r\n                $scope.model = value\r\n            $timeout ->\r\n                $($element).selectpicker()\r\n            , 500\r\n","angular.module 'Wstat'\r\n    .directive 'ngSelect', ->\r\n        restrict: 'E'\r\n        replace: true\r\n        scope:\r\n            object: '='\r\n            model: '='\r\n            noneText: '@'\r\n            label: '@'\r\n            field: '@'\r\n        templateUrl: 'directives/ngselect'\r\n        controller: ($scope, $element, $attrs, $timeout) ->\r\n            # выбираем первое значение по умолчанию, если нет noneText\r\n            if not $scope.noneText\r\n                if $scope.field\r\n                    $scope.model = $scope.object[_.first Object.keys($scope.object)][$scope.field]\r\n                else\r\n                    $scope.model = _.first Object.keys($scope.object)\r\n\r\n            $timeout ->\r\n                $($element).selectpicker()\r\n            , 150\r\n","# angular.module('Egerep').directive 'sms', ->\r\n#     restrict: 'E'\r\n#     templateUrl: 'directives/sms'\r\n#     scope:\r\n#         number: '='\r\n#     controller: ($scope, $timeout, Sms) ->\r\n#         # массовая отправка?\r\n#         $scope.mass = false\r\n#\r\n#         # подсчитать СМС\r\n#         $scope.smsCount = ->\r\n#             SmsCounter.count($scope.message || '').messages\r\n#\r\n#         # отправить\r\n#         $scope.send = ->\r\n#             if $scope.message\r\n#                 sms = new Sms\r\n#                     message: $scope.message\r\n#                     to: $scope.number\r\n#                     mass: $scope.mass\r\n#                 sms.$save()\r\n#                     .then (data) ->\r\n#                         $scope.history.push(data)\r\n#                         scrollDown()\r\n#\r\n#         # подгружаем историю, если номер телефона меняется\r\n#         $scope.$watch 'number', (newVal, oldVal) ->\r\n#             console.log $scope.$parent.formatDateTime($scope.created_at)\r\n#             $scope.history = Sms.query({number: newVal}) if newVal\r\n#             scrollDown()\r\n#\r\n#         scrollDown = ->\r\n#             $timeout ->\r\n#                 $(\"#sms-history\").animate({ scrollTop: $(window).height() }, \"fast\");\r\n","# angular.module 'Egerep'\r\n#     .directive 'tutorPhoto', ->\r\n#         restrict: 'E'\r\n#         replace: true\r\n#         scope:\r\n#             tutor: '='\r\n#             version: '='\r\n#         templateUrl: 'directives/tutor-photo'\r\n","# #\r\n# # Dependencies: UserService should be available in parent scope!\r\n# #\r\n#\r\n# angular.module 'Egerep'\r\n#     .directive 'userSwitch', ->\r\n#         restrict: 'E'\r\n#         scope:\r\n#             entity: '='\r\n#             resource: '='\r\n#             userId: '@'\r\n#         templateUrl: 'directives/user-switch'\r\n#         controller: ($scope) ->\r\n#             $scope.UserService = $scope.$parent.UserService\r\n","# angular.module 'Egerep'\r\n#     .directive 'user', ->\r\n#         restrict: 'E'\r\n#         scope:\r\n#             model: '='      # кол-во\r\n#         templateUrl: 'directives/user'\r\n","angular.module('Wstat')\r\n    .factory 'Phrase', ($resource) ->\r\n        $resource apiPath('phrases'), {id: '@id'}, updatable()\r\n\r\n    .factory 'List', ($resource) ->\r\n        $resource apiPath('lists'), {id: '@id'}, updatable()\r\n\r\napiPath = (entity, additional = '') ->\r\n    \"api/#{entity}/\" + (if additional then additional + '/' else '') + \":id\"\r\n\r\n\r\nupdatable = ->\r\n    update:\r\n        method: 'PUT'\r\ncountable = ->\r\n    count:\r\n        method: 'GET'\r\n","angular.module('Wstat')\r\n    .value 'Published', [\r\n        {id:0, title: 'не опубликовано'},\r\n        {id:1, title: 'опубликовано'},\r\n    ]\r\n    .value 'UpDown', [\r\n        {id: 1, title: 'вверху'},\r\n        {id: 2, title: 'внизу'},\r\n    ]\r\n","angular.module 'Wstat'\r\n    .service 'AceService', ->\r\n        this.initEditor = (FormService, minLines = 30, id = 'editor') ->\r\n            this.editor = ace.edit(id)\r\n            this.editor.getSession().setMode(\"ace/mode/html\")\r\n            this.editor.getSession().setUseWrapMode(true)\r\n            this.editor.setOptions\r\n                minLines: minLines\r\n                maxLines: Infinity\r\n            this.editor.commands.addCommand\r\n                name: 'save',\r\n                bindKey:\r\n                    win: 'Ctrl-S'\r\n                    mac: 'Command-S'\r\n                exec: (editor) ->\r\n                    FormService.edit()\r\n        this\r\n","angular.module 'Wstat'\r\n    .service 'IndexService', ($rootScope) ->\r\n        this.filter = ->\r\n            $.cookie(this.controller, JSON.stringify(this.search), { expires: 365, path: '/' });\r\n            this.current_page = 1\r\n            this.pageChanged()\r\n\r\n        this.max_size = 30\r\n\r\n        this.init = (Resource, current_page, attrs, load_page = true) ->\r\n            $rootScope.frontend_loading = true\r\n            this.Resource = Resource\r\n            this.current_page = parseInt(current_page)\r\n            this.controller = attrs.ngController.toLowerCase().slice(0, -5)\r\n            this.search = if $.cookie(this.controller) then JSON.parse($.cookie(this.controller)) else {}\r\n            this.loadPage() if load_page\r\n\r\n        this.loadPage = ->\r\n            params = {page: this.current_page}\r\n            params.sort = this.sort if this.sort isnt undefined\r\n            this.Resource.get params, (response) =>\r\n                this.page = response\r\n                $rootScope.frontend_loading = false\r\n\r\n        this.pageChanged = ->\r\n            $rootScope.frontend_loading = true\r\n            this.loadPage()\r\n            this.changeUrl()\r\n\r\n        # change browser user / history push\r\n        this.changeUrl = ->\r\n            window.history.pushState('', '', this.controller + '?page=' + this.current_page)\r\n\r\n        this\r\n    .service 'FormService', ($rootScope, $q, $timeout) ->\r\n        this.init = (Resource, id, model) ->\r\n            this.dataLoaded = $q.defer()\r\n            $rootScope.frontend_loading = true\r\n            this.Resource = Resource\r\n            this.saving = false\r\n            if id\r\n                this.model = Resource.get({id: id}, => modelLoaded())\r\n            else\r\n                this.model = new Resource(model)\r\n                modelLoaded()\r\n\r\n\r\n        modelLoaded = =>\r\n            $rootScope.frontend_loading = false\r\n            $timeout =>\r\n                this.dataLoaded.resolve(true)\r\n                $('.selectpicker').selectpicker 'refresh'\r\n\r\n        beforeSave = =>\r\n            if this.error_element is undefined\r\n                ajaxStart()\r\n                this.beforeSave() if this.beforeSave isnt undefined\r\n                this.saving = true\r\n                true\r\n            else\r\n                $(this.error_element).focus()\r\n                # если нет ошибок, вернуть true и обработать в save/create\r\n                false\r\n\r\n        # вырезаем MODEL из url типа /website/model/create\r\n        modelName = ->\r\n            l = window.location.pathname.split('/')\r\n            model_name = l[l.length - 2]\r\n            model_name = l[l.length - 3] if $.isNumeric(model_name)\r\n            model_name\r\n\r\n        this.delete = (event) ->\r\n            bootbox.confirm \"Вы уверены, что хотите #{$(event.target).text()} ##{this.model.id}?\", (result) =>\r\n                if result is true\r\n                    beforeSave()\r\n                    this.model.$delete().then ->\r\n                        redirect modelName()\r\n\r\n        this.edit = ->\r\n            return if not beforeSave()\r\n            this.model.$update().then =>\r\n                this.saving = false\r\n                ajaxEnd()\r\n\r\n        this.create = ->\r\n            return if not beforeSave()\r\n            this.model.$save().then (response) =>\r\n                redirect modelName() + \"/#{response.id}/edit\"\r\n            , (response) =>\r\n                this.saving = false\r\n                ajaxEnd()\r\n                this.onCreateError(response)\r\n\r\n        this\r\n","angular.module 'Wstat'\r\n    .service 'ExportService', ($rootScope, FileUploader) ->\r\n        bindArguments this, arguments\r\n\r\n        this.init = ->\r\n            this.FileUploader.FileSelect.prototype.isEmptyAfterSelection = -> true\r\n\r\n            this.uploader = new this.FileUploader\r\n                url: \t\t\t\t\"excel/import\"\r\n                alias: \t\t\t\t'imported_file'\r\n                method: \t\t\t'post'\r\n                autoUpload: \t\ttrue\r\n                removeAfterUpload: \ttrue\r\n\r\n                onBeforeUploadItem: ->\r\n                    this.url += \"/#{scope.list.id}\" if scope.list.id\r\n\r\n                onCompleteItem: (i, response, status) ->\r\n                    if status is 200\r\n                        notifySuccess 'Импортировано'\r\n                        scope.list.phrases = response if response.length\r\n                    else\r\n                        notifyError 'Ошибка импорта'\r\n\r\n                onWhenAddingFileFailed: (item, filter) ->\r\n                    if filter.name is \"queueLimit\"\r\n                        this.clearQueue()\r\n                        this.addToQueue(item)\r\n\r\n        this.import = (e) ->\r\n            e.preventDefault()\r\n            $('#import-button').trigger 'click'\r\n            return\r\n\r\n        this.export = ->\r\n            window.location = \"/excel/export/#{scope.list.id}\" if scope.list.id\r\n            return\r\n\r\n        this\r\n","angular.module 'Wstat'\r\n    .service 'SmartSort', () ->\r\n        @run = (list) ->\r\n            @list = list\r\n            return unless @list.phrases and @list.phrases.length\r\n\r\n            @getWords()\r\n            @getWeights()\r\n            @sortPhraseByWeight()\r\n\r\n\r\n        @getWords = ->\r\n            @words = []\r\n            for index, phrase of @list.phrases\r\n                @words.push.apply @words, splitBySpace phrase.phrase\r\n\r\n        @getWeights = ->\r\n            @word_weights = []\r\n\r\n            word_groups =  _.chain @words\r\n                            .groupBy (word) -> word\r\n                            .sortBy (word) -> word.length\r\n                            .value()\r\n\r\n            _.map word_groups, (group) =>\r\n                @word_weights[group[0]] = group.length\r\n\r\n        @sortPhraseByWeight = ->\r\n            @list.phrases.forEach (phrase) =>\r\n                words = splitBySpace phrase.phrase\r\n\r\n                words_sorted_by_weight = _.sortBy words.sort().reverse(), ((word) =>\r\n                                                @word_weights[word])\r\n                                          .reverse()\r\n\r\n                phrase_weight = []\r\n                words_sorted_by_weight.forEach (word) =>\r\n                    phrase_weight.push @word_weights[word]\r\n\r\n                phrase.phrase        = words_sorted_by_weight.join ' '\r\n                phrase.phrase_weight = phrase_weight\r\n\r\n            @list.phrases.sort (a, b) ->\r\n                length = Math.min a.phrase_weight.length, b.phrase_weight.length\r\n                min = false\r\n                for i in [0 .. length - 1]\r\n                    debugger if a.phrase_weight[i] is 41 and b.phrase_weight[i] is 124\r\n                    min = -1 if a.phrase_weight[i] < b.phrase_weight[i]\r\n                    min = 1 if a.phrase_weight[i] > b.phrase_weight[i]\r\n                    break if min\r\n\r\n                if not min\r\n                    min = b.phrase_weight.length - a.phrase_weight.length\r\n                    if min is 0\r\n                        min = -1 if a.phrase > b.phrase\r\n                        min =  1 if a.phrase < b.phrase\r\n                min\r\n            .reverse()\r\n\r\n        splitBySpace = (string) ->\r\n            _.without (string.split ' '), ''\r\n\r\n        @","angular.module 'Wstat'\r\n    .service 'TransformService', ($rootScope) ->\r\n        this.selectRow = (index) ->\r\n            this.selected_rows = [] if this.selected_rows is undefined\r\n            if this.selected_rows.indexOf(index) is -1\r\n                this.selected_rows.push(index)\r\n            else\r\n                this.selected_rows.splice(this.selected_rows.indexOf(index), 1)\r\n\r\n        this.add = (index) ->\r\n            this.transform_items = {} if this.transform_items is undefined\r\n\r\n            # скрываем добавленные и добавляем к добавленному\r\n            this.phrases[index].words = [] if this.phrases[index].words is undefined\r\n            this.selected_rows.forEach (position) =>\r\n                this.phrases[position].added = true\r\n                this.phrases[index].words.push(this.phrases[position].phrase)\r\n\r\n            # добавляем к массиву индексов\r\n            this.transform_items[index] = [] if this.transform_items[index] is undefined\r\n            this.transform_items[index] = this.transform_items[index].concat(this.selected_rows)\r\n            this.selected_rows = undefined\r\n            console.log(this.transform_items)\r\n\r\n        this.remove = (index) ->\r\n            this.transform_items[index].forEach (position) =>\r\n                this.phrases[position].added = false\r\n                this.phrases[position].words = undefined\r\n            this.transform_items[index] = undefined\r\n\r\n\r\n        this.transform = ->\r\n            $rootScope.list.phrases.forEach (phrase) =>\r\n                $.each this.transform_items, (main_index, item_indexes) =>\r\n                    item_indexes.forEach (item_index) =>\r\n                        phrase.phrase = replaceWord(phrase.phrase, this.phrases[item_index].phrase, this.phrases[main_index].phrase)\r\n            this.cancel()\r\n            closeModal('transform')\r\n\r\n        this.cancel = ->\r\n            this.phrases = undefined\r\n            this.selected_rows = undefined\r\n            this.transform_items = undefined\r\n\r\n        this\r\n"]}